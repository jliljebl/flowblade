 <!DOCTYPE html>
<html>
<head>
  <title>Advanced Editing</title>
  <link rel="stylesheet" href="style.css">
<script src="toc.js" type="text/javascript"></script>
</head>

<body>

<div id="content">
<img src="header_text_5.png">

<script src="tocgen.js"></script>

<div id="toccontent">

<div id="advtoc">
<div class="subject-header">Advanced Editing Features</div>
</div>

<div id="toc"></div>

<h2>1. Advanced Project Actions </h2>


<h3>Combining Sequences</h3>
<p>
It is possible to import full contents of another Sequence into Sequence currently being edited.
</p>

<ol>
<li> Select <b>Sequence->Import Another Sequence into this Sequence...</b></li>
<li> Select Import action.</li>
<ul>
<li> <b>Append Sequence</b> adds imported Sequence at the end of current Sequence</li>
<li> <b>Insert Sequence at Playhead Position</b> creates a cut at playhead position and inserts imported Sequences at that position</li>
</ul>
<li> Select a Sequence to Import</li>
<ul>
<li> <b>Note that you obviously need atleast two Sequences to exist to do any import actions.</b></li>
</ul>
<li> Press <b>Import</b> button to execute import.</li>
</ol>

<h3>Split part of Sequence to new Sequence</h3>

<ol>
<li> Select <b>Sequence->Split to new Sequence at Playhead position</b></li>
<li> After confirmation dialog the a new Sequence with contents of source Sequence after playhead position will be created and made active.</li>
</ol>

<h3>Importing Media from another Project</h3>

<p>
You can import Media Items from another Project.
</p>

<ol>
<li> Select <b>Project->Import Media From Project...</b></li>
<li> Select a Project file from file system.</li>
<li> Media items that are not present in current Project will be opened in the current bin. Note that it takes a few seconds to load the project before new Media Items begin to appear.</li>
</ol>



<h2>2. Timeline Audio Syncing</h2>

<p>
You can make a clip to move to a position in timeline in which its audio is in sync with audio of another clip on timeline.
</p>

<p>
This enables you to do simplified version of multicam editing on the timeline.
</p>

<ol>
<li> Open context menu with <b>Right Mouse</b> on Clip you wish to sync with some other clip.</li>
<li> Select menu item <b>Select Clip to Audio Sync With...</b>. The cursor changes to a targeting cross.</li>
<li> Click on Clip you wish to audio sync with.</li>
<li> A dialog opens giving info on the sync action that is to be done to sync clips.</li>
<li> Press <b>Do Audio Sync Move Edit</b> button to do the syncing edit.</li>
<li> It is usually a good idea to mute one of the synched clips</li>
</ol>

<div class="note">
Audio syncing looks for best mathematical match between two audio waveforms, so <b>audio syncing non-matching audio will produce random results.</b>
</div>


<h2>3. Slow / Fast Motion and Reverse Clips</h2>

<p>
In Flowblade motion effects are achieved by <b>rendering slow / fast motion  or reverse versions of video clips</b> and placing those on the timeline.
</p>
<h3> Creating Motion Clips </h3>
<ol>
<li> Right click on a Media File and select <b>Render Slow / Fast Motion File</b> from menu</li>
<li>Edit parameters for the new motion Clip
<ul>
<li> Set speed</li>
<li> Give name and location for motion Clip </li>
<li> Select rendering parameters for motion Clip. It is probably a good idea to use a <b>lossless format</b> here to avoid any generational quality losses.</li>
<li> Select render range, either:</li>
<ul>
<li> Full Source Clip</li>
<li> From Source Clip Mark In to Mark Out</li>
</ul>
</ul>
<li> Click <b>Render</b> button to create a new motion Clip</li>
</ol>

<h3> Creating Reverse Clips </h3>
<ol>
<li> Right click on a Media File and select <b>Render Reverse Motion File</b> from menu</li>
<li>Edit parameters for the new motion Clip
<ul>
<li> Set speed</li>
<li> Give name and location for reverse Clip </li>
<li> Select rendering parameters for reverse Clip. It is probably a good idea to use a <b>lossless format</b> here to avoid any generational quality losses.</li>
<li> Select render range, either:</li>
<ul>
<li> Full Source Clip</li>
<li> From Source Clip Mark In to Mark Out</li>
</ul>
</ul>
<li> Click <b>Render</b> button to create a new reverse Clip</li>
</ol>

<h2>4. Clip Parenting</h2>

<p>
In Flowblade Movie Editor you can <b>set a clip's positions to follow another clip's positions</b> on request.
</p>

<h3>Main points</h3>
<ul>
<li>Sync relations are set up by selecting a <b>Sync Parent Clip</b> for a <b>Sync Child Clip</b>.</li>
<li><b>Only clips on track V1 can be Sync Parent Clips</b>. This is done to encourage edit style in which the main body of the Sequence is on track V1 and composites and audio split edits are done relative to the clip sequence on track V1.</li>
<li><b>Sync feature helps preserve earlier work</b> an multitrack composites and audio split edits when clips are no longer in correct positions relative to each other, because of edits elsewhere on the Sequence.</li>
<li><b>Resyncs are only done on request</b> to avoid jumping of clips on the timeline while editing. Explicit resyncs are also better from the point of view of avoiding side effects when doing edits.
</li>
</ul>
<h3>Setting Sync Parent</h3>
<ol>
<li> Click <b>Right Mouse</b> on clip and select Select Sync Parent Clip... on any clip NOT on track V1.</li>
<li> Cursor turns into a Target Cross. Click on clip on track V1 to select it as Sync Parent Clip.</li>
<li> Sync Relation is established between the two clips. Cursor turns back into a default pointer.</li>
<li> Sync State Stripe appears on the Sync Child Clip. Sync State Indicator Stripes on Clips:</li>
<ul>
<li> Green means that clip is in sync with parent.</li>
<li> Red means that clip is NOT in sync with parent.</li>
<li> Gray means that Sync Parent Clip is no longer on track V1.</li>
</ul>
</ol>

<h3>Resyncing Sync Child Clips</h3>
<ul>
<li> Select <b>Edit - >Resync Selected to resync</b> from application menu selected Sync Child Clips.</li>
<li> Click <b>Right Mouse</b> on Sync Child Clip and select <b>Resync</b> from popup menu to resync single clip.</li>
<li> Press <b>Resync Selected</b> Bbtton to resync selected Sync Child Clips.</li>
</ul>

<h3> Clearing Sync Parent Relations </h3>
<ul>
<li> Click <b>Right Mouse</b> on Sync Child Clip and select Clear Sync Relation.</li>
</ul>

<h3>Syncing Composited Clips</h3>
<ul>
<li> If appropriate set all clips that are part of a multitrack composite synched to the same clip.</li>
</ul>

<h3>Audio Split Syncing</h3>
<ul>
<li> Click <b>Right Mouse</b> on clip in track V1 and select Split Audio Synched.</li>
<li> Edit audio split using Two Roll Trim mode to maintain sync with parent clip.</li>
<li> Resync Audio as needed.</li>
</ul>

<h2>5. Filter Masking</h2>
<p>
Filter masking allows for one or more filters to be applied only on some user defined part of image</b>.
</p>

<img src="filter_mask.png">
<p>
<i>Filter masking menu launch button above 'Add Filter Mask' tootip, Mask - Begin and Mask - End filters defining which filters are masked, on the right image with masked Sepia filter.</i>
</p>

<ol>
<li> Click Filter Mask Menu launch button and select if you wish to apply mask on one or all filters.</li>
<li> In submenu select mask <b>Alpha Shape</b>, <b>Luma Key</b>, <b>Image Alpha</b>, <b>Image Luma</b> or <b>Color Select</b>.</li>
<li> Edit mask parameters in filter edit panel for <b>Mask - Begin</b> filter.</li>
<li> You can drag and drop filters in and out of the masked range of filter stack.</li>
<ul>
</ol>

<h2>6. Motion Tracking</h2>
<p>
    When creating a motion tracking effect we are always dealing with two image sources: one that contains the image element that is being tracked, and an another image that follows the tracked image element. 
</p>
<p>
    Flowblade implements motion tracking by providing two filters:
</p>
<ul>
<li> <b>Motion Tracking Create</b> This filter creates the tracking data based on region of image and algorithm selected by the user.</li>
<li> <b>Motion Tracking Apply</b> This filter applies tracking data on another image to follow the image element that was the source of the tracking data.
</ul>
<p>
    Motion tracking data can also be applied to <b>Filter Mask Alpha Shape</b>, see below.
</p>

<h3>Filter: Motion Tracking Create</h3>
<p>
    Add this filter to clip that contains the image element you wish to track.
</p>
<h4>Parameters</h4>
<p>
    <b>Rectancle GUI Editor</b> Set the red rectangle on the image element you wish to track. 
</p>
<p>
    Tracking always starts from first frame of clip, so use the first frame to position the rectangle.
</p>
<p>
    If you like tracking to start in the middle of a clip, then cut clip at that point to create a new clip that has the first frame at the position you wish the tracking to start.
</p>
<p>
    <b>Keyframe Step</b> This sets the interval in frames between keyframes in the created tracking data. So e.g. value 5 creates a keyframe every 5 frames.
</p>
<p>
    <b>Algorithm</b> Algorithm used to create the tracking data.
</p>

<ul>
<li>
<b>KCF - Kernelized Correlation Filters</b> Accuracy and speed better than MIL. This also reports tracking failure better than MIL. Does not recover from full occlusion.
</li>
<li>
<b>MIL - Multiple Instance Learning</b> Performance is quite good, can work when presented with partial occlusion. Tracking failure not reported reliably. Does not recover from full occlusion.
</li>
<li>
<b>MEDIANFLOW</b> 
Excellent tracking failure reporting. Works very well when the motion is predictable and there is no occlusion. Fails under large motion.
</li>
<li>
<b>MOSSE - Minimum Output Sum of Squared Error</b> MOSSE tracker is robust to variations in lighting, scale, pose, and non-rigid deformations. It also detects occlusion and can pause and resume where it left off when the object reappears.
</li>
</ul>

<p>
    <b>Create Motion Tracking Data</b> Pressing this button creates a motion tracking data labeled with name given in the text entry box above. After creation data can be used with <b>Motion Tracking Apply</b> filter.
</p>

<h3>Filter: Motion Tracking Apply</h3>
<p>
    Add this filter to the clip that contains the image that you wish to make follow the tracked image elemnet.
</p>
<p>
    Place the clip with tracking image on top of the clip with tracked image and apply croppping if necessery.
</p>

<h4>Parameters</h4>
<p>
    <b>Select Motion Tracking Data</b> Select the labeled tracking data created from tracking image elemnt you wish to track.
</p>
<p>
    Tracking always starts from first frame of clip.
</p>
<p>
    If you like tracking to start in the middle of a clip, then cut that clip at that point to create a new clip that has the first frame at the position you wish tracking to start.
</p>
<p>
    <b>Tracking Coords Interpretation</b> 
</p>
<ul>
<li>
<b>Absolute</b> Places the top left corner of the image to the top left corner of the tracking data box.
</li>
<li>
<b>Top Left Justified</b> Places the top left corner of image to the top left corner of screen in the first frame of tracking, and then moves image relatively as specified by tracking data. This is useful e.g. when making a text created in <b>Titler</b> (that is placed initially correctly) keep position when tracking data is applied.
</ul>
<p>
    <b>X Offset</b> Moves image in the horizontal direction in relation to the position defined by tracking data.
</p>
<p>
    <b>Y Offset</b> Moves image in the vertical direction in relation to the position defined by tracking data.
</p>
<p>
    <b>Size</b> If set to <b>Scale To Box</b> image is scaled to fit the box defined by tracking data.
</p>
<p>
    <b>Apply Motion Tracking Data</b> Applies selected tracking data with user specified parameters as motion of the clip.
</p>

<h2>7. Jog / Shuttle Support</h2>


<h3>Overview</h3>

<p>
Flowblade has a USB Human Input Device subsystem, which is capable of
supporting selected USB jog/shuttle devices.
</p>

<p>
A jog/shuttle gives you an additional way to navigate through your timeline
using a dedicated hardware control interface, in addition to the keyboard and
mouse.
</p>
<p>
Turning the jog wheel moves the playback location forward and backward, one
frame at a time.
</p>
<p>
Turning the shuttle left or right engages variable speed playback, in forward
or reverse. The farther you turn the ring, the faster it goes.
</p>
<p>
Additionally, most jog/shuttle devices have keys which can be mapped to
various actions within the program. Each supported device has default key
mappings, which can also be customized.
</p>

<h3>Supported Devices</h3>

<table>
<thead>
<tr>
<th>Manufacturer Device Name</th><th>Flowblade Device Name</th><th>Config File</th>
</tr>
</thead>
<tr>
<td>Contour Design ShuttlePRO v2</td><td>Contour Design ShuttlePRO v2</td><td>contour_design_shuttlepro_v2.xml</td>
</tr>
<tr>
<td>Contour Design ShuttleXpress</td><td>Contour Design ShuttleXpress</td><td>contour_design_shuttlexpress.xml</td>
</tr>
<tr>
<td>Contour A/V Solutions SpaceShuttle</td><td>Contour Design ShuttleXpress</td><td>contour_design_shuttlexpress.xml</td>
</tr>
</table>

<h3>Enabling Jog / Shuttle Support</h3>
<p>
Jog/shuttle support is not on by default in Flowblade, and must be enabled.
</p>
<p>
Additionally, Flowblade will not be able to access the USB device without
a small amount of operating system configuration to grant permissions so that
Flowblade is allowed to use the device.
</p>
<h4>Enable Device Permissions</h4>

<div class="important">
For Flatpaks and correctly created distro packages the required file has been added as part of the package. If for some reason the application is not able to access the USB device, try adding the file manually.</b>
</div>

<p>
In order for Flowblade to be able to read from the USB device, it is
necessary to tell your operating system to grant permissions on the device
to non-root users.
</p>
<p>
On Linux, this is done by adding a udev rules configuration file that
instructs the udev subsystem to enable additional access to your device.
</p>
<p>
Become the root user, and create a new text file at
`/etc/udev/rules.d/90-flowblade.rules` with the following contents:
</p>

<div class="note">
<p># Grant unprivileged users access to USB HID jog/shuttle devices</p>

<p># Contour Design ShuttleXpress, Contour A/V Solutions SpaceShuttle</p>
<p>ATTRS{idVendor}=="0b33", ATTRS{idProduct}=="0020", MODE="0666"</p>

<p># Contour Design ShuttlePRO v2</p>
<p>ATTRS{idVendor}=="0b33", ATTRS{idProduct}=="0030", MODE="0666"</p>
</div>

<p>
It may be necessary to reboot your computer after this step. This only
needs to be done once. It is also possible to tell the udev subsystem
to reload the config file instead of rebooting, but this is left as an
exercise for the reader.
</p>
<p>
<b>Don't forget to drop your root privileges after this step, before starting
Flowblade! Do not run Flowblade as root!</b>
</p>

<h4>Tell Flowblade to Use the Device</h4>

<p>
The next step is opening Flowblade, and enabling your device.
</p>
<p>
Go to the <b>Edit</b> menu, select <b>Preferences</b>, and then navigate over
to the <b>Jog/Shuttle</b> tab.
</p>
<p>
Check the <b>USB Jog/Shuttle Enabled</b> checkbox.
</p>
<p>
In the <b>Device</b> pull down menu, select the device driver that you wish to
use. The entries in this menu correspond to the <b>Flowblade Device Name</b> in
the <b>Supported Devices</b> section above.
</p>
<p>
Press <b>OK</b> to close the <b>Preferences</b> window.
</p>
<p>
After this, it will be necessary to exit Flowblade and restart it.
</p>
<p>
At this point, the USB jog/shuttle configuration is part of your saved
Flowblade preferences. You will now be able to use the program with or
without the jog/shuttle, without any further configuration necessary.
</p>
<p>
Please note that Flowblade will only check for the presence of the USB device
at startup, so make sure to have the device plugged in before you start
Flowblade if you want to use it.
</p>

<h3>Custom Key Mappings</h3>

<p>
Flowblade ships with XML config files that provide default key mappings
between the keys on your USB jog/shuttle device, and various actions in
Flowblade. It is possible to customize these mappings, by copying the
appropriate file into the correct user preferences directory, and modifying
the local copy.
</p>
<p>
The precise location of these config files can vary depending on how you
have installed Flowblade. You want to find the `res/usbhid` directory
under the Flowblade installation. From there, you will want to copy the config
file for your particular USB jog/shuttle device to a location in your local
user preferences directory.
</p>
<p>
For example, if you installed Flowblade on Ubuntu using the OS packaging
system, and you have a Contour Design ShuttleXpress, then you would want to
copy the
`/usr/share/flowblade/Flowblade/res/usbhid/contour_design_shuttlexpress.xml`
file into
`.local/share/flowblade/user_usbhid/contour_design_shuttlexpress.xml` under
your home directory.
</p>
<p>
Open up the new local copy of the file under your home directory in a text
editor. You will see more information in the comments of the file about how
the keys are laid out on your particular device. Under the _keymap_ section
of the config file, you can edit the _code_ settings to point to different
_target actions_ that Flowblade can perform, for each of the keys on the
device.
</p>
<p>
Once your file is complete, save and close the file, and start Flowblade.
Now your new custom key mappings will be in effect every time you run the
program.
</p>
<p>
Take care not to introduce any XML errors into the file, or Flowblade will
not be able to process it correctly.
</p>
<p>
See the next section for all of the target actions that can be mapped to
the keys on your device.
</p>
<h4>Available Target Actions</h4>

<table>
<thead>
<tr>
<th>Target Action               </th><th> Description</th>
</tr>
</thead>
<tr>
<td>3_point_overwrite           </td><td> Three Point Overwrite
</tr>
<tr>
<td>add_marker                  </td><td> Add Marker</td>
</tr>
<tr>
<td>append                       </td><td>Append</td>
</tr>
<tr>
<td>append_from_bin              </td><td> Append Selected Media From Bin</td>
</tr>
<tr>
<td>clear_io_marks               </td><td> Clear In/Out Marks</td>
</tr>
<tr>
<td>clear_mark_in                </td><td> Clear Mark In</td>
</tr>
<tr>
<td>clear_mark_out               </td><td> Clear Mark Out</td>
</tr>
<tr>
<td>cut                          </td><td> Cut Active Tracks</td>
</tr>
<tr>
<td>cut_all                      </td><td> Cut All Tracks</td>
</tr>
<tr>
<td>delete                       </td><td> Delete</td>
</tr>
<tr>
<td>display_clip_in_monitor      </td><td> Display Clip In Monitor</td>
</tr>
<tr>
<td>display_sequence_in_monitor  </td><td> Display Current Sequence In Monitor</td>
</tr>
<tr>
<td>enter_edit                   </td><td> Enter Editing Mode</td>
</tr>
<tr>
<td>faster                       </td><td> Faster</td>
</tr>
<tr>
<td>insert                       </td><td> Insert</td>
</tr>
<tr>
<td>lift                         </td><td> Lift</td>
</tr>
<tr>
<td>log_range                    </td><td> Log Range</td>
</tr>
<tr>
<td>mark_in                      </td><td> Mark In</td>
</tr>
<tr>
<td>mark_out                     </td><td> Mark Out</td>
</tr>
<tr>
<td>next_cut                     </td><td> Go To Next Cut</td>
</tr>
<tr>
<td>next_frame                   </td><td> Go To Next Frame</td>
</tr>
<tr>
<td>nudge_back                   </td><td> Nudge Move Selection Back 1 Frame</td>
</tr>
<tr>
<td>nudge_back_10                </td><td> Nudge Move Selection Back 10 Frames</td>
</tr>
<tr>
<td>nudge_forward                </td><td> Nudge Move Selection Forward 1 Frame</td>
</tr>
<tr>
<td>nudge_forward_10             </td><td> Nudge Move Selection Forward 10 Frames</td>
</tr>
<tr>
<td>open_next                    </td><td> Open Next Media Item In Monitor</td>
</tr>
<tr>
<td>open_prev                    </td><td> Open Previous Media Item In Monitor</td>
</tr>
<tr>
<td>overwrite_range              </td><td> Overwrite Range</td>
</tr>
<tr>
<td>play                         </td><td> Play</td>
</tr>
<tr>
<td>play_pause                   </td><td> Play / Pause</td>
</tr>
<tr>
<td>play_pause_loop_marks        </td><td> Play / Pause Mark In to Mark Out Loop</td>
</tr>
<tr>
<td>prev_cut                     </td><td> Go To Previous Cut</td>
</tr>
<tr>
<td>prev_frame                   </td><td> Go To Previous Frame</td>
</tr>
<tr>
<td>resync                       </td><td> Resynchronization</td>
</tr>
<tr>
<td>select_next                  </td><td> Open Next Clip In Filter Editor</td>
</tr>
<tr>
<td>select_prev                  </td><td> Open Previous Clip In Filter Editor</td>
</tr>
<tr>
<td>sequence_split               </td><td> Sequence Split</td>
</tr>
<tr>
<td>slower                       </td><td> Slower</td>
</tr>
<tr>
<td>stop                         </td><td> Stop</td>
</tr>
<tr>
<td>switch_monitor               </td><td> Switch Monitor Display</td>
</tr>
<tr>
<td>to_end                      </td><td> Go To End</td>
</tr>
<tr>
<td>toggle_ripple                </td><td> Toggle Ripple</td>
</tr>
<tr>
<td>to_mark_in                   </td><td> Go To Mark In</td>
</tr>
<tr>
<td>to_mark_out                  </td><td> Go To Mark Out</td>
</tr>
<tr>
<td>to_start                     </td><td> Go To Start</td>
</tr>
<tr>
<td>trim_end                     </td><td> Trim Clip End To Playhead</td>
</tr>
<tr>
<td>trim_start                   </td><td> Trim Clip Start To Playhead</td>
</tr>
<tr>
<td>zoom_in                      </td><td> Zoom In</td>
</tr>
<tr>
<td>zoom_out                     </td><td> Zoom Out</td>
</tr>
</table>


</div>
</div>
</div>


</body>

</html> 
